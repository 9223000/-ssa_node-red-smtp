<script type="text/html" data-help-name="SMTP">
    <p>Sends the <code>msg.payload</code> as an email, with a subject of <code>msg.topic</code>.</p>
    <p>The default message recipient can be configured in the node, if it is left
    blank it should be set using the <code>msg.to</code> property of the incoming message. If left blank
    you can also specify any or all of: <code>msg.cc</code>, <code>msg.bcc</code>, <code>msg.replyTo</code>,
    <code>msg.inReplyTo</code>, <code>msg.references</code>, <code>msg.headers</code>, or <code>msg.priority</code> properties.</p>
    <p>You may optionally set <code>msg.from</code> in the payload which will override the <code>userid</code>
    default value.</p>
    <h3>Gmail users</h3>
    <p>If you are accessing Gmail you may need to either enable <a target="_new" href="https://support.google.com/mail/answer/185833?hl=en">an application password</a>.</p>
    <h3>Authentication</h3>
    <p>When connecting to a SMTP server, two authentication types are available: Basic and XOAuth2.</p>
    <ul>
        <li><b>Basic:</b> requires a username and password to be entered</li>
        <li><b>XOAuth2:</b> requires a username and a <code>msg</code> property to extract the access token</li>
    </ul>
    <h3>SASL Formatting:</h3>
    <p>SASL XOAuth2 tokens are created by combining the username and token, encoding it in base64, and passing it to the mail server in the following format:</p>
    <pre>base64("user=" + userName + "^Aauth=Bearer " + accessToken + "^A^A")</pre>
    <p>If the checkbox is unticked, flow creators can format the token themselves before passing it to the node.</p>
    <h3>Details</h3>
    <p>The payload can be html format. You may supply a separate plaintext version using <code>msg.plaintext</code>.
    If you don't and <code>msg.payload</code> contains html, it will also be used for the plaintext.
    <code>msg.plaintext</code> will be ignored if <code>msg.payload</code> doesn't contain html.</p>
    <p>If the payload is a binary buffer then it will be converted to an attachment.
    The filename should be set using <code>msg.filename</code>. Optionally <code>msg.description</code> can be added for the body text.</p>
    <p>Alternatively you may provide <code>msg.attachments</code> which should contain an array of one or
    more attachments in <a href="https://nodemailer.com/message/attachments/" target="_new">nodemailer</a> format.</p>
    <p>If required by your recipient you may also pass in a <code>msg.envelope</code> object, typically containing extra from and to properties.</p>
    <p>If you have own signed certificates, Nodemailer can complain about that and refuse sending the message. In this case you can try switching off TLS.</p>
    <p><b>Note</b>: uses SMTP with SSL to port 465.</p>
    <h3>Use secure connection</h3>
    <p>If enabled the connection will use TLS when connecting to server. If disabled then TLS is used if server supports the STARTTLS extension. In most cases set this to enabled if you are connecting to port 465. For port 587 or 25 keep it disabled.</p>

</script>
